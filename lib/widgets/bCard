import 'package:flutter/material.dart';
import 'package:new_public_website/utils/app_reponsiveness/responsive_utils.dart';
import 'package:new_public_website/utils/app_reponsiveness/app_spaces.dart';
import 'package:new_public_website/utils/colors_util.dart';
import 'app_text_styles.dart';

class BCard extends StatefulWidget {
  const BCard({Key? key}) : super(key: key);

  @override
  State<BCard> createState() => _BCardState();
}

class _BCardState extends State<BCard> {
  bool _hoverPricing = false;
  bool _hoverDemo = false;

  @override
  Widget build(BuildContext context) {
    // Responsive dimensions
    final double responsiveWidth = ResponsiveUtils.isMobile(context)
        ? MediaQuery.of(context).size.width * 0.95
        : ResponsiveUtils.isTablet(context)
            ? MediaQuery.of(context).size.width * 0.9
            : 1216.67;

    final double responsiveHeight = ResponsiveUtils.isMobile(context)
        ? 350.0
        : ResponsiveUtils.isTablet(context)
            ? 320.0
            : 300.0;

    // Gradient with exact stops
    final gradient = LinearGradient(
      colors: [
        const Color(0xFF2B7FFF), // 0% stop
        const Color(0xFF155DFC), // 50% stop  
        const Color(0xFF193CB8), // 100% stop
      ],
      stops: const [0.0, 0.5, 1.0],
      begin: Alignment.topLeft,
      end: Alignment.bottomRight,
    );

    return Container(
      width: responsiveWidth,
      height: responsiveHeight,
      decoration: BoxDecoration(
        gradient: gradient,
        borderRadius: BorderRadius.circular(20),
      ),
      child: Padding(
        padding: AppSpaces.customPadding(context, h: 40, v: 40),
        child: ResponsiveUtils.isMobile(context)
            ? _buildMobileLayout(context)
            : _buildDesktopLayout(context),
      ),
    );
  }

  Widget _buildDesktopLayout(BuildContext context) {
    return Row(
      mainAxisAlignment: MainAxisAlignment.spaceBetween,
      crossAxisAlignment: CrossAxisAlignment.center,
      children: [
        // Text Content
        Expanded(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              Text(
                'Ready to automate your business?',
                style: TextStyle(
                  fontFamily: 'Arimo',
                  color: Colors.white,
                  fontSize: ResponsiveUtils.getResponsiveFontSize(context, 32),
                  fontWeight: FontWeight.w700,
                  height: 1.2,
                ),
              ),
              AppSpaces.verticalBox(context, 16),
              Text(
                'Join hundreds of businesses using AI agents to scale faster, work\nsmarter, and delight customers.',
                style: TextStyle(
                  fontFamily: 'Arimo',
                  color: Colors.white.withOpacity(0.9),
                  fontSize: ResponsiveUtils.getResponsiveFontSize(context, 18),
                  height: 1.5,
                ),
              ),
            ],
          ),
        ),
        
        AppSpaces.horizontalBox(context, 40),

        // Buttons
        Row(
          children: [
            _buildPricingButton(context),
            AppSpaces.horizontalBox(context, 16),
            _buildDemoButton(context),
          ],
        ),
      ],
    );
  }

  Widget _buildMobileLayout(BuildContext context) {
    return Column(
      mainAxisAlignment: MainAxisAlignment.center,
      crossAxisAlignment: CrossAxisAlignment.center,
      children: [
        // Text Content
        Text(
          'Ready to automate your business?',
          style: TextStyle(
            fontFamily: 'Arimo',
            color: Colors.white,
            fontSize: ResponsiveUtils.getResponsiveFontSize(context, 24),
            fontWeight: FontWeight.w700,
            height: 1.2,
            textAlign: TextAlign.center,
          ),
        ),
        AppSpaces.verticalBox(context, 16),
        Text(
          'Join hundreds of businesses using AI agents to scale faster, work smarter, and delight customers.',
          style: TextStyle(
            fontFamily: 'Arimo',
            color: Colors.white.withOpacity(0.9),
            fontSize: ResponsiveUtils.getResponsiveFontSize(context, 16),
            height: 1.5,
            textAlign: TextAlign.center,
          ),
        ),
        AppSpaces.verticalBox(context, 32),

        // Buttons - Stacked vertically on mobile
        Column(
          children: [
            _buildPricingButton(context),
            AppSpaces.verticalBox(context, 16),
            _buildDemoButton(context),
          ],
        ),
      ],
    );
  }

  Widget _buildPricingButton(BuildContext context) {
    return MouseRegion(
      onEnter: (_) => setState(() => _hoverPricing = true),
      onExit: (_) => setState(() => _hoverPricing = false),
      child: AnimatedContainer(
        duration: const Duration(milliseconds: 300),
        transform: Matrix4.identity()..scale(_hoverPricing ? 1.05 : 1.0),
        child: ElevatedButton(
          style: ElevatedButton.styleFrom(
            backgroundColor: Colors.white,
            foregroundColor: const Color(0xFF155DFC),
            padding: EdgeInsets.symmetric(
              horizontal: ResponsiveUtils.getResponsivePadding(context) * 1.5,
              vertical: ResponsiveUtils.getResponsivePadding(context),
            ),
            shape: RoundedRectangleBorder(
              borderRadius: BorderRadius.circular(12),
            ),
            elevation: 4,
          ),
          onPressed: () {},
          child: Row(
            mainAxisSize: MainAxisSize.min,
            children: [
              Text(
                'See Pricing',
                style: TextStyle(
                  fontFamily: 'Arimo',
                  fontSize: ResponsiveUtils.getResponsiveFontSize(context, 16),
                  fontWeight: FontWeight.w600,
                ),
              ),
              const SizedBox(width: 8),
              AnimatedContainer(
                duration: const Duration(milliseconds: 300),
                transform: Matrix4.identity()
                  ..translate(_hoverPricing ? 4.0 : 0.0, 0.0),
                child: Icon(
                  Icons.arrow_forward,
                  size: ResponsiveUtils.getResponsiveFontSize(context, 18),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }

  Widget _buildDemoButton(BuildContext context) {
    return MouseRegion(
      onEnter: (_) => setState(() => _hoverDemo = true),
      onExit: (_) => setState(() => _hoverDemo = false),
      child: AnimatedContainer(
        duration: const Duration(milliseconds: 300),
        transform: Matrix4.identity()..scale(_hoverDemo ? 1.05 : 1.0),
        child: OutlinedButton(
          style: OutlinedButton.styleFrom(
            foregroundColor: Colors.white,
            side: const BorderSide(color: Colors.white, width: 2),
            padding: EdgeInsets.symmetric(
              horizontal: ResponsiveUtils.getResponsivePadding(context) * 1.5,
              vertical: ResponsiveUtils.getResponsivePadding(context),
            ),
            shape: RoundedRectangleBorder(
              borderRadius: BorderRadius.circular(12),
            ),
            elevation: 0,
          ),
          onPressed: () {},
          child: Text(
            'Schedule Demo',
            style: TextStyle(
              fontFamily: 'Arimo',
              fontSize: ResponsiveUtils.getResponsiveFontSize(context, 16),
              fontWeight: FontWeight.w600,
            ),
          ),
        ),
      ),
    );
  }
}